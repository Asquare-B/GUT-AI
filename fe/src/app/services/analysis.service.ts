import { HttpClient } from '@angular/common/http';
import { Injectable } from '@angular/core';
import { Router } from '@angular/router';
import { Observable } from 'rxjs';

@Injectable({
  providedIn: "root"
})
export class AnalysisService {

  public result: any;
  constructor(private http: HttpClient, private router: Router) { }

  submitPayload(payload: any){
    return this.http.post('http://localhost:8000/predict-with-analysis', payload);
    /* const res = {
      prediction: {
        prediction: "Rarely or never",
        confidence: 1,
        model_version: "1.0.0"
      },
      analysis: "Okay, here's an analysis of the provided gut health data and tailored recommendations for the user.\n\n*Analysis & Recommendations\n\n1. Explanation:\n\nThe prediction indicates that the user rarely or never experiences gut health issues.  This aligns well with their profile: a male in the 6-18 age group who consumes a whole foods diet, gets adequate fiber, regularly includes fermented foods, drinks sufficient water, rarely consumes alcohol, exercises frequently, has regular sleep patterns, manages stress well, rarely takes medicine, has daily bowel movements with soft stool consistency. This healthy lifestyle is likely contributing to their positive gut health status.  Because their predicted issue occurrence is low, these recommendations focus on maintaining and further optimizing their already healthy gut.\n\n2. Lifestyle Changes:\n\nGiven the already positive profile, the changes are about enhancement and maintenance:\n\n   *Mindful Eating Practices:*  Encourage the user to practice mindful eating.  This involves paying attention to hunger and fullness cues, chewing food thoroughly, and minimizing distractions during meals.  This improves digestion and nutrient absorption, preventing potential issues down the line.\n*   *Diversify Gut Microbiome:* While fermented foods are already included, encourage exploring a wider variety. Different fermented foods contain different strains of beneficial bacteria. This promotes a more diverse and resilient gut microbiome. Consider trying different types of yogurt, kefir, kombucha, kimchi, sauerkraut, or tempeh.\n*   *Maintain Physical Activity:* Emphasize the importance of continued regular physical activity. Exercise improves gut motility, reduces inflammation, and supports a healthy gut microbiome. Encourage a mix of aerobic and strength training activities.\n\n*3. Warning Signs:\n\nSince the user currently reports rare or no issues, they need to be aware of changes that warrant medical attention. They should consult a doctor if they experience:\n\n   *Persistent Changes in Bowel Habits:* Significant changes in frequency, consistency (especially hard or watery stools), or urgency lasting more than a few days.\n*   *Abdominal Pain:* Persistent or severe abdominal pain, cramping, or bloating.\n*   *Blood in Stool:* Any visible blood in the stool or on toilet paper after wiping.\n*   *Unexplained Weight Loss:*  Unintentional weight loss without a clear reason.\n*   *Chronic Fatigue:* Persistent fatigue or weakness that interferes with daily activities.\n*   *Severe Heartburn:* Intense burning in chest, which could lead to difficulty breathing.\n\n*4. Diet Plan:\n\nThis diet plan aims to maintain a healthy gut microbiome and support overall well-being, catering to a young male active individual who already prioritizes whole foods. The portion sizes should be adjusted based on the individual's specific caloric needs, which can be determined by consulting with a registered dietitian or using online calorie calculators.\n\n   *Breakfast Ideas:\n    *   **Oatmeal with Berries and Nuts:*  1/2 cup rolled oats cooked with water or milk, topped with 1/2 cup mixed berries (blueberries, strawberries, raspberries), 1/4 cup nuts (almonds, walnuts), and a sprinkle of chia seeds. (Cooking method: Boiling oats)\n    *   *Greek Yogurt with Fruit and Granola:* 1 cup plain Greek yogurt topped with 1/2 cup fruit (banana, peaches), 1/4 cup granola (choose low-sugar varieties), and a drizzle of honey (optional).  (No cooking required)\n    *   *Whole-Wheat Toast with Avocado and Egg:* 2 slices whole-wheat toast topped with 1/4 mashed avocado and 1 scrambled egg. (Cooking methods: Toasting, Scrambling)\n\n*   *Lunch Options:\n    *   **Large Salad with Grilled Chicken or Tofu:* Mixed greens topped with 4-6 oz grilled chicken breast or tofu, 1/2 cup mixed vegetables (cucumber, tomatoes, bell peppers), 1/4 cup chickpeas, and a light vinaigrette dressing. (Cooking method: Grilling)\n    *   *Whole-Grain Sandwich with Turkey or Hummus:* Whole-grain bread with 4-6 oz sliced turkey breast or hummus, lettuce, tomato, and cucumber.  Serve with a side of carrot sticks. (No cooking required)\n    *   *Leftovers:*  Leftovers from dinner are an excellent option for a convenient and healthy lunch.\n\n*   *Healthy Snacks:\n    *   **Apple slices with almond butter:* 1 medium apple sliced with 2 tablespoons almond butter\n    *   *Greek yogurt with berries:* 1 cup plain Greek yogurt with 1/2 cup berries\n    *   *Handful of almonds or walnuts:* 1/4 cup serving\n    *   *Hard-boiled egg:* Provides protein and nutrients\n    *   *Vegetable sticks with hummus:* Carrots, celery, cucumber with 2 tablespoons hummus\n\n*   *Dinner Suggestions:\n    *   **Baked Salmon with Roasted Vegetables:* 4-6 oz baked salmon with 1 cup roasted vegetables (broccoli, Brussels sprouts, sweet potatoes).  (Cooking methods: Baking, Roasting)\n    *   *Chicken Stir-Fry with Brown Rice:* Stir-fried chicken with mixed vegetables (broccoli, carrots, peppers) served over 1/2 cup brown rice. Use a low-sodium soy sauce or coconut aminos. (Cooking method: Stir-frying)\n    *   *Lentil Soup with Whole-Grain Bread:* A hearty and fiber-rich lentil soup served with a slice of whole-grain bread. (Cooking method: Simmering)\n    *   *Turkey Meatloaf with Mashed Sweet Potatoes:* Lean turkey meatloaf with 1/2 cup mashed sweet potatoes. (Cooking methods: Baking, Mashing/Boiling)\n\n*   *Recommended Portion Sizes:* (These are general guidelines and need to be adjusted based on individual needs.)\n    *   Protein: 4-6 oz per meal\n    *   Carbohydrates: 1/2 - 1 cup cooked grains or starchy vegetables per meal\n    *   Vegetables: 1-2 cups per meal\n    *   Fruits: 1/2 - 1 cup per snack\n    *   Healthy Fats: 1-2 tablespoons per meal (e.g., olive oil, avocado, nuts)\n\n*   *Cooking Methods:\n    *   **Prioritize:* Baking, grilling, roasting, steaming, boiling, simmering.\n    *   *Minimize:* Frying (especially deep-frying), using excessive amounts of saturated fat.\n\n*5. Hydration Guide:\n\nThe user already consumes a good amount of water (four or more glasses). Maintaining this is key. Here's a suggested schedule, adjusted for the activity level and age:\n\n   *Upon Waking:* 1 glass (8-12 oz) of water.\n*   *Mid-Morning (around 10 AM):* 1 glass (8-12 oz) of water.\n*   *With Lunch:* 1 glass (8-12 oz) of water.\n*   *Mid-Afternoon (around 3 PM):* 1 glass (8-12 oz) of water.\n*   *With Dinner:* 1 glass (8-12 oz) of water.\n*   *Throughout Exercise:*  Consume water before, during (if exercise is prolonged), and after activity to replace fluids lost through sweat.  Consider electrolyte drinks for very intense or prolonged workouts.\n\n*Important Considerations:\n\n   *Individual Needs:* These recommendations are general guidelines. Consulting with a registered dietitian or healthcare provider is crucial for personalized advice.\n*   *Listen to Your Body:* Pay attention to how different foods and lifestyle factors affect your gut health.  Adjust the diet and routine accordingly.\n*   *Gradual Changes:* When making dietary changes, introduce them gradually to avoid digestive discomfort.\n*   *Supplementation:* Supplementation isn't mentioned as a recommendation as the user is already doing so well. If the user does want to, they should consult with a doctor before using supplements as they can alter the gut microbiome and interfere with prescription medicine.\n\nBy following these recommendations, the user can continue to support a healthy gut and overall well-being.\n"
    }
    return res; */
  }
}
